<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Game Academy – Тестування</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <style>
    /* Всі змінні CSS з вашої дизайн-системи */
    :root {
      --color-primary-main: #4299e1;
      --color-primary-light: #63b3ed;
      --color-primary-dark: #3182ce;
      --color-secondary-main: #ed8936;
      --color-success-main: #48BB78;
      --color-error-main: #d32f2f;
      --color-info-main: #0288d1;
      
      /* Світла тема (текст, рамки) */
      --color-text-primary: #2d3748;
      --color-text-secondary: #718096;
      --color-contrast-text: #ffffff;
      --border-color: #e0e0e0;
      
      /* Темна тема (текст, фон, рамки) */
      --color-dark-bg-default: #1a202c;
      --color-dark-bg-paper: #1f2937;
      --color-dark-text-primary: #f7fafc;
      --color-dark-text-secondary: #cbd5e0;
      --color-dark-border: #374151;
      
      /* --- 
        ЗАГАЛЬНІ (ГЕНЕРИЧНІ) ЗМІННІ ДЛЯ ТЕМИ 
        Вони будуть змінюватись залежно від теми.
        За замовчуванням - СВІТЛА ТЕМА.
      --- */
      --color-bg-default: #f7fafc; /* Світло-сірий фон */
      --color-bg-paper: #ffffff;   /* Білий фон для карток, сайдбару */
      --color-text-main: var(--color-text-primary);
      --color-text-muted: var(--color-text-secondary);
      --color-border-main: var(--border-color);
      --color-btn-disabled-bg: #e2e8f0; /* gray-200 */
      --color-btn-disabled-text: #a0aec0; /* gray-500 */
    }

    /* --- 
      ПЕРЕВИЗНАЧЕННЯ ЗМІННИХ ДЛЯ ТЕМНОЇ ТЕМИ 
      Коли до body додається клас .dark
    --- */
    body.dark {
      --color-bg-default: var(--color-dark-bg-default);
      --color-bg-paper: var(--color-dark-bg-paper);
      --color-text-main: var(--color-dark-text-primary);
      --color-text-muted: var(--color-dark-text-secondary);
      --color-border-main: var(--color-dark-border);
      --color-btn-disabled-bg: #374151; /* gray-700 */
      --color-btn-disabled-text: #718096; /* gray-500 */
    }

    body {
      font-family: 'Roboto', sans-serif;
      /* Використовуємо загальні змінні */
      background: var(--color-bg-default);
      color: var(--color-text-main);
      overflow: hidden; /* Запобігаємо прокрутці всієї сторінки */
      transition: background-color 200ms ease-in-out, color 200ms ease-in-out;
    }

    /* --- СТИЛІ ДЛЯ МАКЕТУ ТЕСТУ --- */
    
    /* Стилі бічної панелі, тепер адаптивні */
    .sidebar {
      background-color: var(--color-bg-paper);
      color: var(--color-text-muted);
      border-right: 1px solid var(--color-border-main);
      transition: background-color 200ms ease-in-out, border-color 200ms ease-in-out;
    }
    .sidebar-nav-item {
      display: flex;
      align-items: center;
      gap: 12px; /* 0.75rem */
      padding: 12px; /* 0.75rem */
      border-radius: 8px; /* rounded-lg з дизайн-системи */
      transition: all 150ms ease-in-out;
      font-weight: 500; /* B2. Body Medium */
      font-size: 14px; /* B3. Body Small */
    }
    .sidebar-nav-item:hover {
      background-color: var(--color-border-main); /* Використовуємо --color-border-main для hover */
      color: var(--color-text-main);
    }
    .sidebar-nav-item.active {
      background-color: var(--color-primary-main);
      color: var(--color-contrast-text);
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    /* Значок сповіщень (адаптовано) */
    .notification-badge {
      position: absolute;
      top: -4px;
      right: -10px;
      background-color: var(--color-error-main); 
      color: white;
      border-radius: 50%;
      width: 24px;
      height: 24px;
      font-size: 11px;
      font-weight: 700;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 3px solid var(--color-bg-paper); /* Фон бічної панелі (адаптивно) */
      line-height: 1;
      transition: border-color 200ms ease-in-out;
    }

    /* Покроковий індикатор прогресу (адаптивно) */
    .progress-step-container {
      display: flex;
      gap: 8px; /* 0.5rem */
      width: 100%;
    }
    .progress-step {
      flex: 1;
      height: 8px; /* h-2 */
      border-radius: 9999px; /* rounded-full */
      background-color: var(--color-border-main); /* Адаптивно */
      transition: background-color 300ms ease-in-out;
    }
    .progress-step.active {
      background-color: var(--color-primary-main);
    }

    /*
      Кастомні РАДІОКНОПКИ для тесту (адаптивно)
    */
    .radio-option-label {
      background-color: var(--color-bg-paper);
      border: 1px solid var(--color-border-main);
      border-radius: 12px; /* rounded-xl з ДС */
      padding: 20px; /* p-5 */
      display: flex;
      align-items: center;
      gap: 16px; /* gap-4 */
      cursor: pointer;
      transition: all 150ms ease-in-out;
    }
    .radio-option-label:hover {
      background-color: var(--color-bg-default); /* Легкий hover */
      border-color: var(--color-text-muted);
    }
    /* Стилі при виборі опції */
    .radio-option-label input:checked ~ .radio-circle {
      border-color: var(--color-primary-main);
    }
    .radio-option-label input:checked ~ .radio-circle .radio-inner-circle {
      transform: scale(1);
    }
    .radio-option-label input:checked ~ .radio-text {
      color: var(--color-text-main);
      font-weight: 500;
    }

    .radio-circle {
      width: 24px; /* w-6 */
      height: 24px; /* h-6 */
      border-radius: 50%;
      border: 2px solid var(--color-text-muted); /* Адаптивно */
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      transition: border-color 150ms ease-in-out;
    }
    .radio-inner-circle {
      width: 12px; /* w-3 */
      height: 12px; /* h-3 */
      background-color: var(--color-primary-main);
      border-radius: 50%;
      transform: scale(0);
      transition: transform 150ms ease-in-out;
    }
    .radio-text {
        color: var(--color-text-muted); /* Адаптивно */
        font-size: 16px; /* B1. Body Regular */
        transition: all 150ms ease-in-out;
    }

    /*
      ДОДАНО: Кастомні ЧЕКБОКСИ для тесту (адаптивно)
    */
    .checkbox-option-label {
      background-color: var(--color-bg-paper);
      border: 1px solid var(--color-border-main);
      border-radius: 12px; /* rounded-xl з ДС */
      padding: 20px; /* p-5 */
      display: flex;
      align-items: center;
      gap: 16px; /* gap-4 */
      cursor: pointer;
      transition: all 150ms ease-in-out;
    }
    .checkbox-option-label:hover {
      background-color: var(--color-bg-default); /* Легкий hover */
      border-color: var(--color-text-muted);
    }
    /* Стилі при виборі опції */
    .checkbox-option-label input:checked ~ .checkbox-circle {
      border-color: var(--color-primary-main);
      background-color: var(--color-primary-main);
    }
    .checkbox-option-label input:checked ~ .checkbox-circle .checkbox-inner-check {
      opacity: 1;
    }
    .checkbox-option-label input:checked ~ .checkbox-text {
      color: var(--color-text-main);
      font-weight: 500;
    }

    .checkbox-circle {
      width: 24px; /* w-6 */
      height: 24px; /* h-6 */
      border-radius: 6px; /* rounded-md */
      border: 2px solid var(--color-text-muted); /* Адаптивно */
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      transition: all 150ms ease-in-out;
      background-color: transparent;
    }
    .checkbox-inner-check {
      /* Використовуємо inline SVG для галочки, щоб не залежати від lucide.js */
      width: 16px;
      height: 16px;
      color: var(--color-contrast-text);
      opacity: 0;
      transition: opacity 150ms ease-in-out;
    }
    .checkbox-text {
        color: var(--color-text-muted); /* Адаптивно */
        font-size: 16px; /* B1. Body Regular */
        transition: all 150ms ease-in-out;
    }
    
    /*
      Кнопки з дизайн-системи (адаптація disabled) 
    */
    .btn {
        padding: 10px 20px; /* px-5 py-2.5 */
        border-radius: 8px; /* rounded-lg */
        font-weight: 600; /* font-semibold */
        transition: all 150ms ease-in-out;
    }
    .btn-primary {
        background-color: var(--color-primary-main);
        color: var(--color-contrast-text);
    }
    .btn-primary:hover {
        background-color: var(--color-primary-dark);
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .btn-disabled {
        background-color: var(--color-btn-disabled-bg); /* Адаптивно */
        color: var(--color-btn-disabled-text);       /* Адаптивно */
        cursor: not-allowed;
    }

  </style>
</head>
<body class="flex"> <aside class="sidebar w-64 h-screen flex flex-col p-4 space-y-4 flex-shrink-0">
    <div class="px-3 py-2 mb-2">
      <h1 class="text-2xl font-bold text-[var(--color-text-main)]">🎮 Game Academy</h1>
    </div>

    <nav class="flex-grow space-y-1">
      <a href="#" class="sidebar-nav-item">
        <i data-lucide="home" class="w-5 h-5"></i>
        <span>Home</span>
      </a>
      <a href="#" class="sidebar-nav-item">
        <i data-lucide="book-open" class="w-5 h-5"></i>
        <span>Courses</span>
      </a>
      <a href="#" class="sidebar-nav-item">
        <i data-lucide="git-merge" class="w-5 h-5"></i>
        <span>Learning Paths</span>
      </a>
      <a href="#" class="sidebar-nav-item">
        <i data-lucide="message-square" class="w-5 h-5"></i>
        <span>Forum</span>
      </a>
      <a href="#" class="sidebar-nav-item">
        <i data-lucide="bar-chart-3" class="w-5 h-5"></i>
        <span>Leaderboard</span>
      </a>
      <a href="#" class="sidebar-nav-item active">
        <i data-lucide="clipboard-check" class="w-5 h-5"></i>
        <span>My Tests</span>
      </a>
      <a href="#" class="sidebar-nav-item">
        <i data-lucide="bookmark" class="w-5 h-5"></i>
        <span>Bookmarks</span>
      </a>
      <a href="#" class="sidebar-nav-item">
        <i data-lucide="pie-chart" class="w-5 h-5"></i>
        <span>Analytics</span>
      </a>
      <a href="#" class="sidebar-nav-item">
        <i data-lucide="library" class="w-5 h-5"></i>
        <span>Lessons Library</span>
      </a>
      <a href="#" class="sidebar-nav-item">
        <i data-lucide="package" class="w-5 h-5"></i>
        <span>Modules</span>
      </a>
      <a href="#" class="sidebar-nav-item">
        <i data-lucide="refresh-cw" class="w-5 h-5"></i>
        <span>My Change Requests</span>
      </a>
    </nav>

    <div class="space-y-2 border-t border-[var(--color-border-main)] pt-4">
      
      <a href="#" class="sidebar-nav-item" id="theme-toggle">
        <i data-lucide="moon" class="w-5 h-5 icon-moon"></i>
        <i data-lucide="sun" class="w-5 h-5 icon-sun" style="display: none;"></i>
        <span id="theme-toggle-text">Dark Mode</span>
      </a>
      <a href="#" class="sidebar-nav-item">
        <div class="relative">
          <div class="w-10 h-10 rounded-full bg-blue-300 flex items-center justify-center font-bold text-blue-800 text-sm">
            ЮВ
          </div>
          <div class="notification-badge">
            38+
          </div>
        </div>
        <div class="flex flex-col -space-y-1">
          <span class="font-semibold text-[var(--color-text-main)]">Юлія Водяр</span>
          <span class="text-xs">Elite student</span>
        </div>
      </a>
      <a href="#" class="sidebar-nav-item">
        <i data-lucide="log-out" class="w-5 h-5"></i>
        <span>Logout</span>
      </a>
    </div>
  </aside>

  <main class="flex-1 h-screen overflow-y-auto p-6 lg:p-8">
    
    <div class="max-w-7xl mx-auto">
      
      

      <header class="flex justify-between items-start mb-6">
        <div>
          <h2 class="text-4xl font-bold mb-2">Sales Navigator</h2>
        </div>
        
        <div class="text-right space-y-1 flex-shrink-0">
          <div class="flex items-center justify-end gap-2 text-lg font-medium text-[var(--color-text-muted)]">
            <i data-lucide="clock" class="w-5 h-5"></i>
            <span id="timer-display">05:00</span>
          </div>
          <p class="text-sm text-[var(--color-text-muted)]">Passing score: <span class="font-semibold text-[var(--color-text-main)]">70%</span></p>
          <p id="question-counter-text" class="text-sm text-[var(--color-text-muted)]">
            Question <span class="font-semibold text-[var(--color-text-main)]">1</span> of <span class="font-semibold text-[var(--color-text-main)]">4</span>
          </p>
        </div>
      </header>
      
      <div id="test-container"> 
          <div class="progress-step-container mb-10" id="progress-container">
            </div>
    
          <div>
            <h3 class="text-2xl font-medium mb-8 text-[var(--color-text-main)]" id="question-text">
              Завантаження питання...
            </h3>
    
            <div class="space-y-4" id="options-container">
              </div>
          </div>
    
          <footer class="flex justify-between items-center mt-12 border-t border-[var(--color-border-main)] pt-8">
            <button id="prev-btn" class="btn btn-disabled">
              Previous
            </button>
            <button id="next-btn" class="btn btn-disabled">
              Next
            </button>
          </footer>
      </div>

    </div>
  </main>

  <button class="fixed bottom-8 right-8 w-16 h-16 bg-[var(--color-primary-main)] text-white rounded-full flex items-center justify-center shadow-lg hover:bg-[var(--color-primary-dark)] transition-all">
    <i data-lucide="help-circle" class="w-8 h-8"></i>
  </button>


  <script>
    // === ЛОГІКА ПЕРЕМИКАННЯ ТЕМИ (залишено без змін) ===
    const themeToggleBtn = document.getElementById('theme-toggle');
    const themeToggleText = document.getElementById('theme-toggle-text');
    const moonIcon = document.querySelector('.icon-moon');
    const sunIcon = document.querySelector('.icon-sun');

    function setTheme(theme) {
      if (theme === 'dark') {
        document.body.classList.add('dark');
        themeToggleText.textContent = 'Light Mode';
        moonIcon.style.display = 'none';
        sunIcon.style.display = 'block';
        localStorage.setItem('theme', 'dark');
      } else {
        document.body.classList.remove('dark');
        themeToggleText.textContent = 'Dark Mode';
        moonIcon.style.display = 'block';
        sunIcon.style.display = 'none';
        localStorage.setItem('theme', 'light');
      }
    }
    const savedTheme = localStorage.getItem('theme') || 'light';
    setTheme(savedTheme);

    themeToggleBtn.addEventListener('click', (e) => {
      e.preventDefault();
      const currentTheme = document.body.classList.contains('dark') ? 'dark' : 'light';
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      setTheme(newTheme);
    });
    
    // === НОВА ЛОГІКА ТЕСТУВАННЯ ===
    document.addEventListener('DOMContentLoaded', () => {
      
      // --- 1. Дані тесту ---
      const testData = [
        {
          id: 1,
          type: 'single',
          question: "Why should connection requests be sent from regular LinkedIn rather than within Sales Navigator?",
          options: [
            "To use AI recommendations",
            "To send InMail instead",
            "To preserve messaging history after a Navigator trial ends",
            "To access additional filters"
          ],
        },
        {
          id: 2,
          type: 'multiple',
          question: "Which of the following are key features of Sales Navigator? (Select all that apply)",
          options: [
            "InMail messages",
            "Lead recommendations",
            "Real-time sales updates",
            "Automatic connection requests"
          ],
        },
        {
          id: 3,
          type: 'truefalse',
          question: "All Sales Navigator accounts can be integrated with any CRM system.",
          options: ["True", "False"],
        },
        {
          id: 4,
          type: 'single',
          question: "What is the primary purpose of 'Lead Lists' in Sales Navigator?",
          options: [
            "To create call scripts",
            "To organize and track prospects",
            "To send bulk emails",
            "To analyze competitor performance"
          ],
        }
      ];

      // --- 2. Змінні стану ---
      let currentQuestionIndex = 0;
      let userAnswers = {}; // { 1: [2], 2: [0, 1], 3: [1], 4: null }
      let timerInterval;
      let timeRemaining = 300; // 5 хвилин (5 * 60)

      // --- 3. Посилання на DOM-елементи ---
      const testContainer = document.getElementById('test-container');
      const questionText = document.getElementById('question-text');
      const optionsContainer = document.getElementById('options-container');
      const progressContainer = document.getElementById('progress-container');
      const questionCounter = document.getElementById('question-counter-text');
      const timerDisplay = document.getElementById('timer-display');
      const prevBtn = document.getElementById('prev-btn');
      const nextBtn = document.getElementById('next-btn');

      // --- 4. Функції рендеру ---

      // Головна функція рендеру
      function renderQuestion(index) {
        const question = testData[index];
        
        // 1. Оновити текст питання
        questionText.textContent = question.question;

        // 2. Оновити лічильник
        questionCounter.innerHTML = `
          Question <span class="font-semibold text-[var(--color-text-main)]">${index + 1}</span> 
          of <span class="font-semibold text-[var(--color-text-main)]">${testData.length}</span>
        `;

        // 3. Оновити прогрес-бар
        progressContainer.innerHTML = '';
        for (let i = 0; i < testData.length; i++) {
          const step = document.createElement('div');
          step.className = 'progress-step';
          if (i <= index) {
            step.classList.add('active');
          }
          progressContainer.appendChild(step);
        }

        // 4. Згенерувати варіанти відповідей
        optionsContainer.innerHTML = '';
        switch (question.type) {
          case 'single':
          case 'truefalse':
            renderRadioOptions(question);
            break;
          case 'multiple':
            renderCheckboxOptions(question);
            break;
        }

        // 5. Оновити кнопки
        updateButtonStates();
      }

      // Рендер радіокнопок (single / truefalse)
      function renderRadioOptions(question) {
        const currentAnswer = userAnswers[question.id]; // Це буде масив [індекс] або undefined
        
        question.options.forEach((option, index) => {
          const isChecked = currentAnswer && currentAnswer[0] === index;
          
          optionsContainer.innerHTML += `
            <label class="radio-option-label">
              <input type="radio" name="question-${question.id}" value="${index}" class="hidden" ${isChecked ? 'checked' : ''}>
              <div class="radio-circle">
                <div class="radio-inner-circle"></div>
              </div>
              <span class="radio-text">${option}</span>
            </label>
          `;
        });
      }

      // Рендер чекбоксів (multiple)
      function renderCheckboxOptions(question) {
        const currentAnswers = userAnswers[question.id] || []; // Це буде масив [індекси] або []
        
        question.options.forEach((option, index) => {
          const isChecked = currentAnswers.includes(index);
          
          optionsContainer.innerHTML += `
            <label class="checkbox-option-label">
              <input type="checkbox" name="question-${question.id}" value="${index}" class="hidden" ${isChecked ? 'checked' : ''}>
              <div class="checkbox-circle">
                <svg class="checkbox-inner-check" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>
              </div>
              <span class="checkbox-text">${option}</span>
            </label>
          `;
        });
      }

      // --- 5. Функції-обробники ---

      // Збереження відповіді
      function handleOptionChange(e) {
        const target = e.target;
        if (target.tagName !== 'INPUT') return;

        const question = testData[currentQuestionIndex];
        const value = parseInt(target.value);

        if (question.type === 'multiple') {
          // Логіка для чекбоксів
          let answers = userAnswers[question.id] || [];
          if (target.checked) {
            if (!answers.includes(value)) {
              answers.push(value);
            }
          } else {
            answers = answers.filter(ans => ans !== value);
          }
          userAnswers[question.id] = answers.length > 0 ? answers : null;
        } else {
          // Логіка для радіокнопок
          userAnswers[question.id] = [value];
        }
        
        updateButtonStates();
      }

      // Оновлення стану кнопок
      function updateButtonStates() {
        const question = testData[currentQuestionIndex];
        const hasAnswer = userAnswers[question.id] && userAnswers[question.id].length > 0;

        // Кнопка "Next"
        if (hasAnswer) {
          nextBtn.classList.remove('btn-disabled');
          nextBtn.classList.add('btn-primary');
        } else {
          nextBtn.classList.add('btn-disabled');
          nextBtn.classList.remove('btn-primary');
        }

        // Текст кнопки "Next"
        if (currentQuestionIndex === testData.length - 1) {
          nextBtn.textContent = 'Submit Test';
        } else {
          nextBtn.textContent = 'Next';
        }

        // Кнопка "Previous"
        if (currentQuestionIndex === 0) {
          prevBtn.classList.add('btn-disabled');
          prevBtn.classList.remove('btn-primary'); // На випадок, якщо вона була
        } else {
          prevBtn.classList.remove('btn-disabled');
          prevBtn.classList.add('btn-primary');
        }
      }

      // Перехід до наступного питання
      function nextQuestion() {
        if (nextBtn.classList.contains('btn-disabled')) return;

        if (currentQuestionIndex === testData.length - 1) {
          submitTest();
        } else {
          currentQuestionIndex++;
          renderQuestion(currentQuestionIndex);
        }
      }

      // Перехід до попереднього питання
      function prevQuestion() {
        if (prevBtn.classList.contains('btn-disabled')) return;
        
        currentQuestionIndex--;
        renderQuestion(currentQuestionIndex);
      }
      
      // Завершення тесту
      function submitTest() {
        clearInterval(timerInterval);
        testContainer.innerHTML = `
          <h2 classclass="text-3xl font-bold text-[var(--color-text-main)] mb-4">Test Submitted!</h2>
          <p class="text-lg text-[var(--color-text-muted)]">Your answers have been saved. You can now close this window.</p>
          <pre class="mt-4 p-4 bg-[var(--color-bg-default)] rounded-lg text-xs overflow-x-auto">${JSON.stringify(userAnswers, null, 2)}</pre>
        `;
        // Тут можна додати логіку підрахунку балів
        console.log("Final Answers:", userAnswers);
      }
      
      // --- 6. Таймер ---
      function startTimer() {
        timerInterval = setInterval(() => {
          timeRemaining--;
          
          const minutes = Math.floor(timeRemaining / 60).toString().padStart(2, '0');
          const seconds = (timeRemaining % 60).toString().padStart(2, '0');
          timerDisplay.textContent = `${minutes}:${seconds}`;

          if (timeRemaining <= 0) {
            clearInterval(timerInterval);
            timerDisplay.textContent = '00:00';
            submitTest();
          }
        }, 1000);
      }

      // --- 7. Ініціалізація ---
      function initTest() {
        renderQuestion(currentQuestionIndex);
        startTimer();

        // Додаємо слухачі подій
        nextBtn.addEventListener('click', nextQuestion);
        prevBtn.addEventListener('click', prevQuestion);
        optionsContainer.addEventListener('change', handleOptionChange);
      }

      initTest();
    });

    // Ініціалізація іконок Lucide
    lucide.createIcons();
  </script>
</body>
</html>